{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/bigmac/codeclan_work/week_12/day_5/weekend_Work/pirate_hooks_react_StartPoint/src/containers/PirateContainer.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport PirateList from '../components/pirates/PirateList';\nimport PirateDetail from '../components/pirates/PirateDetail';\nimport PirateForm from '../components/pirates/PirateForm';\nimport Request from '../helpers/request';\n\nconst PirateContainer = () => {\n  _s();\n\n  const [pirates, setPirates] = useState([]);\n  const [ships, setShips] = useState([]);\n  const [raids, setRaids] = useState([]);\n\n  const requestAll = function () {\n    const request = new Request();\n    const piratePromise = request.get('/api/pirates');\n    const shipPromise = request.get('/api/ships');\n    const raidPromise = request.get('/api/raids');\n    Promise.all([piratePromise, shipPromise, raidPromise]).then(data => {\n      setPirates(data[0]);\n      setShips(data[1]);\n      setRaids(data[2]);\n    });\n  };\n\n  const findPirateById = function (id) {\n    return pirates.find(pirate => {\n      return pirate.id === parseInt(id);\n    });\n  };\n\n  const handleDelete = function (id) {\n    const request = new Request();\n    const url = \"/api/pirates/\" + id;\n    request.delete(url).then(() => window.location = \"/pirates\");\n  };\n\n  const handlePost = function (pirate) {\n    const request = new Request();\n    request.post(\"/api/pirates\", pirate).then(() => window.location = '/pirates');\n  };\n\n  useEffect(() => {\n    requestAll();\n  }, []);\n\n  if (!pirates) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/pirates/new\",\n          render: () => {\n            return /*#__PURE__*/_jsxDEV(PirateForm, {\n              ships: ships,\n              onCreate: handlePost\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 14\n            }, this);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/pirates/:id\",\n          render: props => {\n            const id = props.match.params.id;\n            const pirate = findPirateById(id);\n            return /*#__PURE__*/_jsxDEV(PirateDetail, {\n              pirate: pirate,\n              onDelete: handleDelete\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 16\n            }, this);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          render: () => {\n            return /*#__PURE__*/_jsxDEV(PirateList, {\n              pirates: pirates\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 16\n            }, this);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 7\n      }, this)\n    }, void 0, false)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 7\n  }, this);\n};\n\n_s(PirateContainer, \"Jy8x3N3hazWajupm54J4X5YomgY=\");\n\n_c = PirateContainer;\nexport default PirateContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"PirateContainer\");","map":{"version":3,"sources":["/Users/bigmac/codeclan_work/week_12/day_5/weekend_Work/pirate_hooks_react_StartPoint/src/containers/PirateContainer.js"],"names":["React","useState","useEffect","BrowserRouter","Router","Route","Switch","PirateList","PirateDetail","PirateForm","Request","PirateContainer","pirates","setPirates","ships","setShips","raids","setRaids","requestAll","request","piratePromise","get","shipPromise","raidPromise","Promise","all","then","data","findPirateById","id","find","pirate","parseInt","handleDelete","url","delete","window","location","handlePost","post","props","match","params"],"mappings":"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","sourcesContent":["\nimport React, {useState, useEffect} from 'react';\nimport {BrowserRouter as Router, Route, Switch} from 'react-router-dom';\nimport PirateList from '../components/pirates/PirateList';\nimport PirateDetail from '../components/pirates/PirateDetail';\nimport PirateForm from '../components/pirates/PirateForm';\nimport Request from '../helpers/request';\n\nconst PirateContainer = () => {\n  const [pirates, setPirates] = useState([]);\n  const [ships, setShips] = useState([]);\n  const [raids, setRaids] = useState([]);\n\n  const requestAll = function(){\n    const request = new Request();\n    const piratePromise = request.get('/api/pirates')\n    const shipPromise = request.get('/api/ships')\n    const raidPromise = request.get('/api/raids')\n\n    Promise.all([piratePromise, shipPromise, raidPromise])\n    .then((data) => {\n        setPirates(data[0]);\n        setShips(data[1]);\n        setRaids(data[2])\n    })\n  }\n\n  const findPirateById = function(id){\n    return pirates.find((pirate) => {\n      return pirate.id === parseInt(id);\n    })\n  }\n\n  const handleDelete = function(id){\n    const request = new Request();\n    const url = \"/api/pirates/\" + id\n    request.delete(url)\n    .then(() => window.location = \"/pirates\")\n  }\n\n  const handlePost = function(pirate){\n    const request = new Request();\n    request.post(\"/api/pirates\", pirate)\n    .then(() => window.location = '/pirates')\n  }\n\n\n  useEffect(()=>{\n    requestAll()\n  }, [])\n\n  if(!pirates){\n    return null\n  }\n  return(\n      <Router>\n      <>\n      <Switch>\n\n      <Route exact path = '/pirates/new' render={() =>{\n      return <PirateForm ships={ships} onCreate={handlePost}/>\n       }}/> \n\n\n      <Route exact path=\"/pirates/:id\" render={(props) =>{\n        const id = props.match.params.id;\n        const pirate = findPirateById(id);\n        return <PirateDetail pirate={pirate}\n        onDelete={handleDelete}\n          \n        />\n      }}/>\n      \n\n      <Route render={() => {\n        return <PirateList pirates={pirates}/>\n      }} />\n\n      </Switch>\n      </>\n      </Router>\n  )\n}\n\nexport default PirateContainer;"]},"metadata":{},"sourceType":"module"}